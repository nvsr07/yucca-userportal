<div ng-controller="ManagementDatasetCtrl as datasetCtrl">
	<h2>
		<span translate>DATASET</span>  <small>{{dataset.datasetCode}} - {{dataset.info.datasetName}}</small>
	</h2>
	<div class='mute'>
		V {{dataset.datasetVersion}} - <small class='mute'>{{dataset.info.registrationDate|date}}</small>
	</div>
	<div class='row'><p>&nbsp;</p></div>
	<div class='row'>
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<p>{{dataset.info.description}}</p>
			<p><strong><span translate>DATASET_FIELD_METADATA_DATADOMAIN</span></strong>: {{dataset.info.dataDomain|translate}}</p>
			<div>
				<ul class="list-inline">
					<li ng-repeat="tag in dataset.info.tags"><span class="label label-tag label-custom"><span ng-bind-html="tag.tagCode|translate"></span></span></li>
				</ul>
			</div>
		</div>
	</div>
	<accordion close-others="false">
		<accordion-group is-open="status1.open">
		 	<accordion-heading>
	 			<span translate>MANAGEMENT_EDIT_DATASET_LEGAL_INFO</span>
	 			<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status1.open, 'glyphicon-chevron-right': !status1.open}"></i>
			</accordion-heading>
			
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
				<div class="row card-row">
					<div class="col-sm-2 card-label"><strong><span translate>DATASET_FIELD_METADATA_LICENSE</span></strong></div>
					<div class='col-sm-10'>{{dataset.info.license|nvl:' -'}}</div>
				</div>	
				<div class="row card-row">
					<div class="col-sm-2 card-label"><strong><span translate>DATASET_FIELD_METADATA_DISCLAIMER</span></strong></div>
					<div class='col-sm-10'>{{dataset.info.disclaimer|nvl:' -'}}</div>
				</div>	
				<div class="row card-row">
					<div class="col-sm-2 card-label"><strong><span translate>DATASET_FIELD_METADATA_COPYRIGHT</span></strong></div>
					<div class='col-sm-10'>{{dataset.info.copyright|nvl:' -'}}</div>
				</div>	
			</div>
		</accordion-group>
		<accordion-group is-open="status2.open" ng-show="stream!=null">
			<accordion-heading>
				<span translate>VIRTUALENTITY</span>
	 			<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status2.open, 'glyphicon-chevron-right': !status2.open}"></i>
			</accordion-heading>
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>VIRTUALENTITY_FIELD_NAME</span></strong></div>
				<div class='col-sm-10'>{{stream.streams.stream.virtualEntityName|nvl:''}}</div>
			</div>	
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>VIRTUALENTITY_FIELD_CODE</span></strong></div>
				<div class='col-sm-10'>{{stream.streams.stream.virtualEntityCode|nvl:''}}</div>
			</div>	
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>VIRTUALENTITY_FIELD_DESCRIPTION</span></strong></div>
				<div class='col-sm-10'>{{stream.streams.stream.virtualEntityDescription|nvl:''}}</div>
			</div>	
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>VIRTUALENTITY_FIELD_TYPE</span></strong></div>
				<div class='col-sm-10'>{{stream.streams.stream.virtualEntityType|nvl:''}}</div>
			</div>	
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>VIRTUALENTITY_FIELD_CATEGORY</span></strong></div>
				<div class='col-sm-10'>{{stream.streams.stream.virtualEntityCategory|nvl:''}}</div>
			</div>	
			<div class="row card-row"  ng-show="stream.streams.stream.virtualEntityPositions.position!=null">
				<div class="col-sm-2 card-label"><strong><span translate>VIRTUALENTITY_FIELD_POSITION</span></strong></div>
				<div class='col-sm-4'>[{{stream.streams.stream.virtualEntityPositions.position[0].lat}};{{stream.streams.stream.virtualEntityPositions.position[0].lon}}]</div>
				<div class="col-sm-2 card-label"><strong><span translate>VIRTUALENTITY_FIELD_ELEVATION</span></strong></div>
				<div class='col-sm-4'>{{stream.streams.stream.virtualEntityPositions.position.elevation[0]|nvl:' -'}}</div>
			</div>	
		</accordion-group>
		<accordion-group is-open="status3.open" ng-show="stream!=null">
			<accordion-heading>
				<span translate>STREAM</span>
	 			<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status3.open, 'glyphicon-chevron-right': !status3.open}"></i>
			</accordion-heading>
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>STREAM_FIELD_NAME</span></strong></div>nome codice fps
				<div class='col-sm-10'>{{stream.streamName|nvl:' -'}}</div>
			</div>	
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>STREAM_FIELD_CODE</span></strong></div>
				<div class='col-sm-10'>{{stream.streamCode|nvl:' -'}}</div>
			</div>	
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong><span translate>STREAM_FIELD_FPS</span></strong></div>
				<div class='col-sm-10'>{{stream.streams.stream.fps|nvl:' -'}}</div>
			</div>	
		</accordion-group>
		<accordion-group is-open="status4.open">
			<accordion-heading>
				<span translate>MANAGEMENT_EDIT_DATASET_COLUMNS</span>
	 			<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status4.open, 'glyphicon-chevron-right': !status4.open}"></i>
			</accordion-heading>
		
			<div class="col-sm-12">
				<table class="table-condensed table-supercondensed">
					<thead>
						<tr>
							<th translate>DATASET_FIELD_METADATA_FIELD_NAME</th>
							<th translate>DATASET_FIELD_METADATA_FIELD_ALIAS</th>
							<th translate>DATASET_FIELD_METADATA_FIELD_DATATYPE</th>
							<th translate>DATASET_FIELD_METADATA_FIELD_SOURCE_COLUMN</th>
							<th translate>DATASET_FIELD_METADATA_FIELD_UNIT</th>
							<th translate>DATASET_FIELD_METADATA_FIELD_IS_KEY</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="field in dataset.info.fields">
							<td>{{field.fieldName}}</td>
							<td>{{field.fieldAlias}}</td>
							<td>{{field.dataType|nvl:' - '}}</td>
							<td>{{field.sourceColumn}}</td>
							<td>{{field.measureUnit|nvl:' - '}}</td>
							<td>{{field.isKey|booleanToString}}</td>
							
					</tbody>
				</table>
			</div>
		</accordion-group>
	</accordion>
	<h4><span translate>MANAGEMENT_VIEW_DATASET_DATA_URLS</span></h4>
	<strong><span translate>MANAGEMENT_EDIT_DATASET_API_URL</span></strong>
	<p><a href="{{apiMetdataUrl}}" target="_blank" class='management-dataset-download-link'>{{apiMetdataUrl}}</a></p>
	<div class='row'>
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<div class="row card-toolbar">
				<a  href='#/management/editDataset/{{tenant}}/{{dataset.datasetCode}}' class="btn btn-edit" ng-show="isOwner() && canEdit() && isAuthorized('management/datasets/update')">
					<span class="glyphicon glyphicon-pencil "></span> {{'MANAGEMENT_VIEW_DATASET_EDIT_BUTTON'|translate}}
				</a>
				<a  href='#/management/uploadDataset/{{tenant}}/{{dataset.datasetCode}}' class="btn  btn-new" ng-show="isOwner()  && canAddData() && isAuthorized('management/datasets/upload')">
					<span class="glyphicon glyphicon-cloud-upload "></span> {{'MANAGEMENT_VIEW_DATASET_ADD_DATA_BUTTON'|translate}}
				</a>
				<a  href='{{downloadCsvUrl}}' class="btn  btn-download-dataset" ng-show="isAuthorized('management/datasets/download')"  >
					<span class="glyphicon glyphicon-cloud-download "></span> {{'MANAGEMENT_VIEW_DATASET_DOWNLOAD_BUTTON'|translate}}
				</a>
			</div>
		</div>
	</div>
</div>
