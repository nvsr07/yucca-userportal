<div ng-controller="ManagementDatasetListCtrl as datasetsCtrl"  ng-cloak>
	<div class='container'>
		<h3> <span translate>MANAGEMENT_DATASET_SUBTITLE </span></h3>
		<div class='row'>
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" >
				<div class='clearfix content-toolbar'>
					<div class="pull-left">
			        	<a  href="#/management/newDataset/{{tenantCode}}" class="btn  btn-new" ng-disabled="!isAuthorized('management/datasets/update') ||!isOwner() ">
							<span class="glyphicon glyphicon-plus "></span>&nbsp;<span translate>MANAGEMENT_DATASET_LIST_NEW_DATASET</span>
						</a>
						<button  href="javascript:void(0)" ng-click='editDataset()' class="btn  btn-edit" ng-disabled="!isAuthorized('management/datasets/update') || !isOwner() || !canEdit()" title="{{'MANAGEMENT_DATASET_LIST_EDIT_DATASET_BUTTON_HINT'|translate}}">
							<span class="glyphicon glyphicon-pencil "></span>&nbsp;<span translate>MANAGEMENT_DATASET_LIST_EDIT_DATASET</span>
						</button>
						<button href="javascript:void(0)" ng-click='deleteDataset()'class="btn  btn-delete" ng-disabled="true" title="{{'MANAGEMENT_DATASET_LIST_DELETE_DATASET_BUTTON_HINT'|translate}}">
							<span class="glyphicon glyphicon-trash "></span>&nbsp;<span translate>MANAGEMENT_DATASET_LIST_DELETE_DATASET</span>
						</button>
					</div>
					<div class="btn-group pull-right">
						<form class="form-inline" role="form">
							<div class="form-group">
								<div class="form-group">
									<input type="text" class="form-control col-xs-2" ng-model="nameFilter" placeholder="{{'DATASET_LIST_NAME_FILTER'|translate}}" />
								</div>
							</div>
						</form>
					</div>
				</div>
				<div class="table-responsive management-datasetList-table">
					<table class="table">
						<thead>
							<tr>
								<th>
								</th>
								<th>
									<a href="" ng-click="predicate = 'datasetCode'; reverse=!reverse"><span translate>DATASET_FIELD_CONFIGDATA_CODE</span>
									<span ng-show="predicate=='datasetCode' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='datasetCode' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								
								</th>
								<th>
									<a href="" ng-click="predicate  = 'info.datasetName'; reverse=!reverse"><span translate>DATASET_FIELD_METADATA_NAME</span>
									<span ng-show="predicate=='info.datasetName' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='info.datasetName' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								
								</th>
								<th>
									<a href="" ng-click="predicate = 'configData.type'; reverse=!reverse"><span translate>DATASET_FIELD_CONFIGDATA_TYPE</span> / <span translate>DATASET_FIELD_CONFIGDATA_SUBTYPE</span>
									<span ng-show="predicate=='configData.type' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='configData.type' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								
								</th>
								<th>
									<a href="" ng-click="predicate = 'info.registrationDate'; reverse=!reverse"><span translate>DATASET_FIELD_METADATA_REGISTRATIONDATE</span>
									<span ng-show="predicate=='info.registrationDate' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='info.registrationDate' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								</th>
								<th>
									<a href="" ng-click="predicate = 'datasetVersion'; reverse=!reverse"><span translate>DATASET_FIELD_CONFIGDATA_DATAVERSION</span>
									<span ng-show="predicate=='datasetVersion' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='datasetVersion' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-show="showLoading">
								<td colspan='6' >
									<div class='ajax-loading-container'>
										<span class='ajax-loading-big'></span>
										<h4>Loading...</h4>
									</div>
								</td>
							</tr>
							<tr ng-repeat="dataset in filteredDatasetsList = (datasetList | filter: searchNameFilter | orderBy:predicate:reverse) |startFrom:(currentPage-1)*pageSize | limitTo:pageSize ">
								<td><input type="checkbox" name="selected" ng-checked="isSelected(dataset)"  ng-click="updateSelection($event, dataset)"/>
								<td><a href="#/management/viewDataset/{{tenant}}/{{dataset.datasetCode}}">{{dataset.datasetCode}}</a></td>
								<td class='text-left'>
									<a href="#/management/viewDataset/{{tenant}}/{{dataset.datasetCode}}">
										<img ng-src="{{dataset.info.icon}}" alt="logo dataset" class='list-entity-icon-preview-img' >
										{{dataset.info.datasetName}}
									</a>
								</td>
								<td>{{dataset.configData.type}} / {{dataset.configData.subtype}}</td>
								<td>{{dataset.info.registrationDate|date}}</td>
								<td><span translate>{{dataset.datasetVersion}}</span></td>
							</tr>
						</tbody>
					</table>
					<pagination boundary-links="true" total-items="filteredDatasetsList.length" ng-model="currentPage" ng-change="selectPage()" class="pagination-sm" previous-text="&lsaquo;"
						next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
					></pagination>
				</div>
			</div>
		</div>
	</div>
</div>

