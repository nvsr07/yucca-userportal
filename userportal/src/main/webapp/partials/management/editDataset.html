<div ng-controller="ManagementDatasetCtrl as datasetCtrl">
	<h2>
		<span translate>DATASET</span> <small><span translate>MANAGEMENT_EDIT_DATASET_SUBTITLE</span>  {{dataset.code}}</small>
	</h2>
	<div class='row'>
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<div class="alert alert-danger" ng-show='updateError'>
				<strong>{{updateError.error_message}}</strong>
				{{updateError.error_detail}}
			</div>
			<div class="alert alert-success" ng-show='updateInfo'>
				<strong translate>MANAGEMENT_EDIT_DATASET_DATA_SAVED_INFO</strong> {{updateInfo.status}}
			</div>
		</div>
	</div>
	<div class='row'>
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong translate>DATASET_FIELD_CODE</strong></div>
				<div class="col-sm-10">{{dataset.code}}</div>
			</div>			
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong translate>DATASET_FIELD_VERSION</strong></div>
				<div class="col-sm-10">{{dataset.version}}</div>
			</div>			
			<div class="row card-row">
				<div class="col-sm-2 card-label"><strong translate>DATASET_FIELD_STATUS</strong></div>
				<div class="col-sm-10">{{dataset.deploymentStatusDesc}}</div>
			</div>			
		</div>
	</div>
	<div class='row'>
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

			<form class="form-horizontal" role="form" name="editDatasetForm">
				<div class='form-label-separator' translate>MANAGEMENT_EDIT_DATASET_GENERAL_INFO</div>
				<div class="form-group">
					<label for="inputDatasetName" class="col-sm-2 control-label" translate>DATASET_FIELD_NAME</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" ng-model="dataset.name"  id="inputDatasetName" placeholder="{{'DATASET_FIELD_NAME'|translate}}" >
					</div>
				</div>
				<div class="form-group">
					<label for="inputDatasetAddTag" class="col-sm-2 control-label" translate>DATASET_FIELD_TAGS</label>
					<div class="col-sm-10">
						<p>
							<span  ng-repeat="tag in dataset.tags.tag">
								<span class="label label-tag label-custom"><span ng-bind-html="tag.tagCode|translate"></span> &nbsp;
								<a href="javascript:void(0)" ng-click='removeTag($index)'>&times;</a>
								</span> &nbsp;
							</span>
						</p>						
						<p>
							<div class="input-group">
	    						<select class="input-sm form-control" ng-model="newTag" ng-options="tag as (tag|translate) for tag in tagList">
	    							<option value="" ng-bind-html="'MANAGEMENT_EDIT_DATASET_TAG_PLACEHOLDER'|translate" ></option>
	    						</select>
							    <span class="input-group-btn">
							    	<a class="btn  btn-sm"  href="javascript:void(0)" ng-click='addTag()' title="{{'MANAGEMENT_EDIT_DATASET_ADD_TAG'|translate}}" ><i class='glyphicon glyphicon-plus'></i></a>
							    </span>
	    					</div>
						</p>
					</div>
				</div>			
				<div class="form-group">
					<label for="inputDatasetDomain" class="col-sm-2 control-label"translate>DATASET_FIELD_DOMAIN</label>
					<div class="col-sm-10">
						<select class="input-sm form-control" ng-model="dataset.domain" ng-options="domain as (domain|translate) for domain in domainList">
	    					<option value="" translate>MANAGEMENT_EDIT_DATASET_DOMAIN_PLACEHOLDER</option>
	    				</select>
					</div>
				</div>		
				<div class='form-label-separator' translate>MANAGEMENT_EDIT_DATASET_COLUMNS</div>
				<div class="form-group">
					<div class="col-sm-12">
						<table class="table table-striped">
							<thead>
								<tr>
									<th translate>DATASET_FIELD_COLUMN_ORDER</th>
									<th translate>DATASET_FIELD_COLUMN_CODE</th>
									<th translate>DATASET_FIELD_COLUMN_SEMANTIC</th>
									<th translate>DATASET_FIELD_COLUMN_DATATYPE</th>
									<th>&nbsp;</th>
									<th>&nbsp;</th>
									<th>&nbsp;</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="column in dataset.columns.column">
									<td>{{column.order}}</td>
									<td>{{column.code}}</td>
									<td>{{column.semantic}}</td>
									<td>{{column.datatype}}</td>
									<td><a href="javascript:void(0)" ng-click='moveDownColumn($index)' class="btn btn-sm"><i class='glyphicon glyphicon-arrow-up'></i></a></td> 
									<td><a href="javascript:void(0)" ng-click='moveUpColumn($index)' class="btn btn-sm"><i class='glyphicon glyphicon-arrow-down'></i></a></td> 
									<td><a href="javascript:void(0)" ng-click='removeColumn($index)' class="btn btn-danger btn-sm"><i class='glyphicon glyphicon-minus'></i></a></td> 
								</tr>
								<tr>
									<td>&nbsp;</td>
	               					<td ng-class="{ 'has-error': insertColumnError }">
	               						<input class="input-sm form-control" type="text" name="newColumnCode" id="newColumnCode" ng-model="newColumn.code" 
	               					 		 placeholder="{{'DATASET_FIELD_COLUMNS_CODE_PLACEHOLDER'|translate}}"></td>
	             					<td>
					                	<input class="input-sm form-control" type="text" name="newColumnSemantic" id="newColumnSemantic" 
					                		ng-model="newColumn.semantic" placeholder="{{'DATASET_FIELD_COLUMNS_SEMANTIC_PLACEHOLDER'|translate}}">
									</td>
	           					 	<td>
	             					 	<select class="input-sm form-control" ng-model="newColumnDatatype" ng-options="dataType.dataType for dataType in dataTypeList track by dataType.idDataType" >
	             						 	<option value="" translate>MANAGEMENT_EDIT_STREAM_DATATYPE_PLACEHOLDER</option>
	             					 	</select>
									</td>
									<td>&nbsp;</td>
									<td>&nbsp;</td>
	         						<td><a href="javascript:void(0)" ng-click='addComponent()' class="btn btn-sm"><i class='glyphicon glyphicon-plus'></i></a></td>
								</tr>
							</tbody>
						</table>
						<div class="alert alert-danger" ng-show='insertColumnError'>
							<strong>{{updateError.error_message}}</strong>
							{{insertColumnError|translate}}
						</div>
					</div>
				</div>
				<div class='form-label-separator' translate>MANAGEMENT_EDIT_DATASET_SETTINGS</div>
				<div class="form-group">
					<label for="RadioGroupVisibility" class="col-sm-2 control-label"><span ng-bind-html="'DATASET_FIELD_VISIBILITY'|translate"></span></label>
					<div class="col-sm-10">
						<label class="radio-inline">
	              			<input type="radio" name="RadioGroupVisibility" value="public" id="RadioGroupVisibility_0" ng-model="dataset.visibility" disabled>
	              			<span translate>MANAGEMENT_EDIT_DATASET_VISIBILITY_PUBLIC</span>
	            		</label>
						<label class="radio-inline">
	              			<input type="radio" name="RadioGroupVisibility" value="private" id="RadioGroupVisibility_1" ng-model="dataset.visibility" disabled>
	              			<span translate>MANAGEMENT_EDIT_DATASET_VISIBILITY_PRIVATE</span>
	            		</label>
					</div>
				</div>
				<div class="form-group">
					<label for="RadioGroupPublish" class="col-sm-2 control-label" translate>MANAGEMENT_EDIT_DATASET_PUBLISH_ON_STORE_LABEL</label>
					<div class="col-sm-10">
						<label class="radio-inline">
	              			<input type="radio" name="RadioGroupPublish" value="true" id="RadioGroupPublish_0" ng-model="dataset.publish" disabled>
	              			<span translate>MANAGEMENT_EDIT_DATASET_PUBLISH_ON_STORE</span>
	            		</label>
						<label class="radio-inline">
	              			<input type="radio" name="RadioGroupPublish" value="false" id="RadioGroupPublish_1" ng-model="dataset.publish" disabled>
	              			<span translate>MANAGEMENT_EDIT_DATASET_NOT_PUBLISH_ON_STORE</span>
	            		</label>
					</div>
				</div>
				<div class='form-label-separator' translate>MANAGEMENT_EDIT_DATASET_OTHER_INFO</div>
				<div class="form-group">
					<label for="v" class="col-sm-2 control-label" translate>DATASET_FIELD_LICENCE</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="inputDatasetLicence" placeholder="{{'DATASET_FIELD_LICENCE'|translate}}" ng-model="dataset.licence" >
					</div>
				</div>			
				<div class="form-group">
					<label for="inputDatasetDisclaimer" class="col-sm-2 control-label" translate>DATASET_FIELD_DISCLAIMER</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="inputDatasetDisclaimer" placeholder="{{'DATASET_FIELD_DISCLAIMER'|translate}}" ng-model="dataset.disclaimer" >
					</div>
				</div>			
				<div class="form-group">
					<label for="inputDatasetCopyright" class="col-sm-2 control-label" translate>DATASET_FIELD_COPYRIGHT</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="inputDatasetCopyright" placeholder="{{'DATASET_FIELD_COPYRIGHT'|translate}}" ng-model="dataset.copyright" >
					</div>
				</div>			
				<div class='form-label-separator'></div>
				<div class="row">
					<div class=" col-sm-12 form-toolbar">
						<a  href='#/management/viewDataset/{{tenant}}/{{dataset.code}}' class="btn" translate>MANAGEMENT_EDIT_DATASET_FINISH_BUTTON</a>
						<a  ng-click='updateDataset()'  class="btn btn-default" ng-disabled="!isOwner() || editDatasetForm.$invalid" translate>MANAGEMENT_EDIT_DATASET_SAVE_BUTTON</a>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
