<div class='clearfix wizard-title' ng-cloak>
	<div class='pull-left'><h3><span translate-cloak translate>MANAGEMENT_NEW_DATASET_TITLE</span> - <span translate-cloak translate>MANAGEMENT_NEW_DATASET_METADATA_SUBTITLE</span></h3></div>
	<div class='pull-right'><h3><small>Step 3/5</small></h3></div>
</div>
<form class="form-horizontal" role="form" name="metadataDatasetForm" ng-cloak>
	<div class='row'>
		<div class="col-sm-7">
		   	<datasource-detail-info datasource='dataset' ng-if='datasetReady'></datasource-detail-info>
			<datasource-sharing datasource='dataset' ng-if='datasetReady'></datasource-sharing>
			<datasource-legal-info datasource='dataset' ng-if='datasetReady'></datasource-legal-info>
			<datasource-dcat datasource='dataset' ng-if='datasetReady'></datasource-dcat>
		   <!-- 
			<div class="form-group">
				<label for="inputDatasetDesc" class="col-sm-3 control-label" translate-cloak translate>DATASET_FIELD_METADATA_DESCRIPTION</label>
				<div class="col-sm-9">
					<textarea id="inputDatasetDesc" class="form-control" rows="2" resize="none" ng-model="dataset.description" placeholder="{{'DATASET_FIELD_METADATA_DESCRIPTION'|translate}}"  maxlength="3000">
					</textarea>
				</div>
			</div>
			
			
			
			
			
			<div class="form-group">
				<label for="inputDatasetAddTag" class="col-sm-3 control-label"><span translate-cloak translate>DATASET_FIELD_METADATA_TAGS</span><span class='required-asterisk'>*</span></label>
				<div class="col-sm-4 text-left">
					<div class="input-group input-group-sm popover-html tag-html-tooltip-container text-left">
						<input type="text" ng-model="newTag.value" typeahead="tagCode as tag.tagLabel for tag in tagList | filter:{tagLabel:$viewValue} | limitTo:8" class="form-control"
								typeahead-editable="false" typeahead-on-select="onTagSelect($item, $model, $label)"/>
						<span class="input-group-addon tag-html-tooltip-button" ng-click="showChooseTagTable()">&quest;</span>
						
					</div>	
				</div>
				<div class="col-sm-5 text-left">
					<span  ng-repeat="tag in dataset.tags">
						<span class="label label-tag label-custom"><span>{{(tag|tagFromId:tagMap).tagLabel|translate}}</span> &nbsp;
							<a href="javascript:void(0)" ng-click='removeTag($index)'  class='close-button'>&times;</a>
						</span> &nbsp;
					</span>
				</div>
			</div>			
			<div class="form-group">
				<label for="inputDatasetExternalReference" class="col-sm-3 control-label" translate-cloak translate>DATASET_FIELD_METADATA_EXTERNAL_REFERENCE</label>
				<div class="col-sm-9">
					<input type="text" class="form-control" id="inputDatasetExternalReference" placeholder="{{'DATASET_FIELD_METADATA_EXTERNAL_REFERENCE'|translate}}" 
					ng-model="dataset.externalreference" >
				</div>
			</div>		
			<div class="form-group">
				<label for="inputDatasetIcon" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_ICON</span></label>
				<div class="col-sm-5" ng-show='dropSupported'>
					<div ng-file-drop="onIconSelect($files)" class='upload-icon-drop-area-compact' ng-file-drag-over-class="upload-icon-drop-area-hover" ng-show="dropSupported">
						<div translate-cloak translate>MANAGEMENT_EDIT_DATASET_UPLOAD_ICON_DROPAREA</div>
						<div class='desc'>256x256</div>
						<div class='desc'>jpg | png</div>
						<div class='text-center'>
							<div ng-file-select="onIconSelect($files)" data-multiple="false" title="select file" onclick="this.value = null" class="browse-button">
								<span translate-cloak translate>MANAGEMENT_EDIT_STREAM_UPLOAD_ICON_BUTTON_LOAD_FILE</span>
							</div>
						</div>
					</div>
					<div ng-file-drop-available="dropSupported=true" ng-show="!dropSupported">HTML5 Drop File is not supported!</div>
					
				</div>
				<div class="col-sm-5" ng-show='!dropSupported'>
					<div ng-file-select="onIconSelect($files)" data-multiple="false" title="select file" onclick="this.value = null" class="upload-icon-selecticon-button">
						<span translate-cloak translate>MANAGEMENT_EDIT_STREAM_UPLOAD_ICON_BUTTON_LOAD_FILE</span>
					</div>
				</div>
				<div class="col-sm-4 text-right">
					<img ng-src="{{dataset.icon}}" alt="logo dataset" class='upload-icon-preview-img' ng-if='dataset.icon' >
					<img ng-src="{{DEFAULT_DATASET_ICON}}" alt="logo dataset" class='upload-icon-preview-img' ng-if='!dataset.icon' >
				</div>
				
			</div>		
			<div class="form-group">
				<label for="RadioGroupVisibility" class="col-sm-3 control-label"><span ng-bind-html="'DATASET_FIELD_METADATA_VISIBILITY'|translate"></span></label>
				<div class="col-sm-4 text-left">
					<label class="radio-inline">
		         		<input type="radio" name="RadioGroupVisibility" value="public" id="RadioGroupVisibility_0" ng-model="dataset.visibility" ng-disabled='!canCreatePublicDataset()'>
		         		<span translate-cloak translate>MANAGEMENT_EDIT_DATASET_VISIBILITY_PUBLIC</span>
		       		</label>
					<label class="radio-inline">
		         		<input type="radio" name="RadioGroupVisibility" value="private" id="RadioGroupVisibility_1" ng-model="dataset.visibility" ng-disabled='!canCreatePublicDataset()'>
		         		<span translate-cloak translate>MANAGEMENT_EDIT_DATASET_VISIBILITY_PRIVATE</span>
		       		</label>
				</div>
			</div>
			<div class="form-group" ng-if="dataset.visibility=='private' && canShareDataset()">
				<label for="inputStreamAddTenantSharing" class="col-sm-3 control-label"><span translate-cloak translate>DATASET_FIELD_TENANTSSHARING</span></label>
				<div class="col-sm-4 text-left">
					<div class="input-group input-group-sm popover-html tag-html-tooltip-container text-left">
						<input type="text" ng-model="newTenantSharing.value" typeahead="tenant as tenant.name for tenant in tenantsList | filter:{name:$viewValue} | limitTo:8" class="form-control"
								typeahead-editable="false" typeahead-on-select="onTenantSharingSelect($item, $model, $label)"/>
						<span class="input-group-addon tag-html-tooltip-button" ng-click="showChooseTenantTable()">&quest;</span>
					</div>	
				</div>
				<div class="col-sm-5 text-left">
					<div>
						<span  ng-repeat="tenantSharing in dataset.sharingTenants">
							<span class="label label-custom label-tenant-sharing"><span title="{{tenantSharing.tenantcode}} - {{tenantSharing.description}}">{{tenantSharing.name}}</span> &nbsp;
							<a href ng-click='removeTenantSharing($index)' ng-if="tenantSharing.tenantcode!=tenantCode"  class='close-button'>&times;</a>
							</span> &nbsp;
						</span>
					</div>						
				</div>
			</div>	
			<div ng-if="dataset.visibility=='public'">
				<div class="form-group">
					<label for="RadioGroupOpendata" class="col-sm-3 control-label"><span ng-bind-html="'DATASET_FIELD_METADATA_OPENDATA'|translate"></span></label>
					<div class="col-sm-4  text-left">
						<label class="radio-inline">
		             			<input type="radio" name="RadioGroupOpendata" value="true" id="RadioGroupOpenadata_0" ng-model="isOpendata" ng-disabled="dataset.visibility!='public'">
		             			<span translate-cloak translate>YES</span>
		           		</label>
						<label class="radio-inline">
		             			<input type="radio" name="RadioGroupOpendata" value="false" id="RadioGroupOpenadata_1" ng-model="isOpendata" ng-disabled="dataset.visibility!='public'">
		             			<span translate-cloak translate>NO</span>
		           		</label>
					</div>
				</div>
				<div ng-if="isOpendata=='true'">
					<div class="form-group">
						<label for="inputDatasetOpendataAuthor" class="col-sm-3 control-label" translate-cloak translate>DATASET_FIELD_METADATA_OPENDATA_AUTHOR</label>
						<div class="col-sm-9">
							<input type="text" class="form-control" id="inputDatasetOpendataAuthor" placeholder="{{'DATASET_FIELD_METADATA_OPENDATA_AUTHOR_PLACEHOLDER'|translate}}" 
							ng-model="dataset.openData.opendataauthor" >
						</div>
					</div>	
					<div class="form-group ">
						<label for="inputDatasetDomain" class="col-sm-3 control-label"translate-cloak translate>DATASET_FIELD_METADATA_OPENDATA_LANG</label>
						<div class="col-sm-9">
							<select class="input-sm form-control" ng-model="dataset.openData.opendatalanguage" ng-options="k as v for (k, v) in OPENDATA_LANGUAGES">
		    					<option value="" translate-cloak translate>DATASET_FIELD_METADATA_OPENDATA_LANG_PLACEHOLDER</option>
		    				</select>
						</div>
					</div>		
					<div class="form-group ">
						<label for="inputDatasetOpendataDataUpdateDate" class="col-sm-3 control-label" translate-cloak translate>DATASET_FIELD_METADATA_OPENDATA_DATA_UPDATE_DATE</label>
						<div class="col-sm-9">
							<input type="date" class="form-control"  ng-model="dataset.openData.opendataupdatedate"  close-text="Close" />
						</div>
					</div>
					
				</div>
			</div>		
			<h3 class='text-left form-section-title' translate-cloak translate>MANAGEMENT_EDIT_DATASET_LEGAL_INFO</h3>
			<div class="form-group" ng-show="dataset.visibility!='private'">
				<label for="inputStreamLicense" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_LICENCE</span></label>
				<div class="col-sm-9 text-left">
					<label class="radio-inline">
		         		<input type="radio" name="RadioGroupLicence" value="{{'STREAM_FIELD_METADATA_LICENSE_CCBY'|translate}}" id="RadioGroupLicence_0" ng-model="dataset.license.licensecode">
		         		<span translate-cloak translate>STREAM_FIELD_METADATA_LICENSE_CCBY</span>
		       		</label>
					<label class="radio-inline">
		         		<input type="radio" name="RadioGroupLicence" value="{{'STREAM_FIELD_METADATA_LICENSE_CC0'|translate}}" id="RadioGroupLicence_0" ng-model="dataset.license.licensecode">
		         		<span translate-cloak translate>STREAM_FIELD_METADATA_LICENSE_CC0</span>
		       		</label>
					<label class="radio-inline">
		         		<input type="radio" name="RadioGroupLicence" value="" id="RadioGroupLicence_1" ng-model="dataset.license.licensecode">
		         		<span translate-cloak translate>STREAM_FIELD_METADATA_LICENSE_OTHER</span>
		       		</label>
					<textarea id="inputDatasetLicence" class="form-control" rows="4" resize="none" ng-model="dataset.license.licensecode" placeholder="{{'STREAM_FIELD_METADATA_LICENSE'|translate}}" ng-show='isLicenseVisible(dataset)' >
					</textarea>
				</div>
			</div>			
			<div class="form-group" ng-show="dataset.visibility!='private'">
				<label for="inputStreamDisclaimer" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_DISCLAIMER</span></label>
				<div class="col-sm-9">
					<textarea class="form-control" rows="4" resize="none" ng-model="dataset.license.disclaimer"  placeholder="{{'STREAM_FIELD_DISCLAIMER'|translate}}" id="inputStreamDisclaimer" >
					</textarea>					
					
				</div>
			</div>			
			<div class="form-group" ng-show="dataset.visibility=='private'">
				<label for="inputStreamCopyright" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_COPYRIGHT</span></label>
				<div class="col-sm-9">
					<input type="text" class="form-control" id="inputStreamCopyright" placeholder="{{'STREAM_FIELD_COPYRIGHT'|translate}}" ng-model="dataset.copyright" >
				</div>
			</div>			
			
			
			<div  ng-if='!dataset.unpublished'>
				<h3 class='text-left form-section-title' ><span translate-cloak translate>MANAGEMENT_NEW_DATASET_DCAT</span></h3>
		
				<div class="form-group">
					<label for="inputStreamDCATRightHolderName" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_RIGHTHOLDERNAME</span><span class='required-asterisk'>*</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamDCATRightHolderName" placeholder="{{'STREAM_FIELD_METADATA_DCAT_RIGHTHOLDERNAME_PLACEHOLDER'|translate}}" 
						ng-required="true" ng-model="dataset.dcat.dcatrightsholdername">
					</div>	
				</div>		
				<div class="form-group">
					<label for="inputStreamDCATRightHolderType" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_RIGHTHOLDERTYPE</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamDCATRightHolderType" placeholder="{{'STREAM_FIELD_METADATA_DCAT_RIGHTHOLDERTYPE_PLACEHOLDER'|translate}}" 
						ng-model="dataset.dcat.dcatrightsholdertype">
					</div>	
				</div>		
				<div class="form-group">
					<label for="inputStreamDCATRightHolderId" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_RIGHTHOLDERID</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamDCATRightHolderId" placeholder="{{'STREAM_FIELD_METADATA_DCAT_RIGHTHOLDERID_PLACEHOLDER'|translate}}" 
						ng-model="dataset.dcat.dcatrightsholderid">
					</div>	
				</div>	
				<div class="form-group">
					<label for="inputStreamDCATCreatorName" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_CREATORNAME</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamDCATCreatorName" placeholder="{{'STREAM_FIELD_METADATA_DCAT_CREATORNAME_PLACEHOLDER'|translate}}" 
						ng-model="dataset.dcat.dcatcreatorname">
					</div>	
				</div>		
				<div class="form-group">
					<label for="inputStreamDCATCreatorType" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_CREATORTYPE</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamDCATCreatorType" placeholder="{{'STREAM_FIELD_METADATA_DCAT_CREATORTYPE_PLACEHOLDER'|translate}}" 
						ng-model="dataset.dcat.dcatcreatortype">
					</div>	
				</div>		
				<div class="form-group">
					<label for="inputStreamDCATCreatorId" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_CREATORID</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamDCATCreatorId" placeholder="{{'STREAM_FIELD_METADATA_DCAT_CREATORID_PLACEHOLDER'|translate}}" 
						ng-model="dataset.dcat.dcatcreatorid">
					</div>	
				</div>	
				<div class="form-group">
					<label for="inputStreamOpendataNomeOrg" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_NOMEORG</span><span class='required-asterisk'>*</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamOpendataNomeOrg" placeholder="{{'STREAM_FIELD_METADATA_DCAT_NOMEORG_PLACEHOLDER'|translate}}" 
						ng-required="true" ng-model="dataset.dcat.dcatnomeorg">
					</div>	
				</div>		
				<div class="form-group">
					<label for="inputStreamOpendataEmailOrg" class="col-sm-3 control-label"><span translate-cloak translate>STREAM_FIELD_METADATA_DCAT_EMAILORG</span><span class='required-asterisk'>*</span></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" id="inputStreamOpendataEmailOrg" placeholder="{{'STREAM_FIELD_METADATA_DCAT_EMAILORG_PLACEHOLDER'|translate}}" 
						ng-required="true" ng-model="dataset.dcat.dcatemailorg">
					</div>	
				</div>	
			</div>-->
			<div class="row">
				<div class=" col-sm-12 form-toolbar">
					<a ng-click='goToRequestor()' class="btn " translate-cloak translate>MANAGEMENT_NEW_DATASET_WIZARD_PREV</a>
					<a ng-click='goToChooseType()' class="btn btn-wizard-next" ng-disabled="!isOwner() || metadataDatasetForm.$invalid || checkTag(dataset)" translate-cloak translate>MANAGEMENT_NEW_DATASET_WIZARD_NEXT</a>
				</div>
			</div>
		</div>
		<div class="col-sm-4 panel-hint col-sm-offset-1">
			<div class='panel-hint-content'>
				<h2><span class='icon-hint'><i class="fa fa-lightbulb-o" aria-hidden="true"></i></span>&nbsp;<span translate>MANAGEMENT_PANEL_METADATA_HINT_TITLE</span></h2>
				<ul class='fa-ul'>
					<li class='hint-item'><i class="fa-li fa fa-angle-double-right" aria-hidden="true"></i><span class='hint-message' ng-bind-html="'MANAGEMENT_DATASET_METADATA_DESCRIPTION_HINT'|translate"></span></li>
					<li class='hint-item'>
						<i class="fa-li fa fa-angle-double-right" aria-hidden="true"></i>
						<strong class='hint-message' ng-bind-html="'MANAGEMENT_DATASET_METADATA_MANDATORY_HINT'|translate"></strong>
						<ul class='fa-ul'>
							<li >
								<i class='fa fa-square-o' ng-if='checkTag(dataset)'></i>
								<span class='text-success'><i class='fa fa-check-square-o ' ng-if='!checkTag(dataset)'></i></span>
								<span translate>MANAGEMENT_DATASET_MATADATA_TAG_HINT</span>
							</li>
							<li ng-if='!dataset.unpublished'>
								
								<strong translate>MANAGEMENT_DATASET_MATADATA_DCAT_HINT</strong>
							</li>
							<li ng-if='!dataset.unpublished'>
								<i class='fa fa-square-o' ng-if='dataset.dcat.dcatrightsholdername==null'></i>
								<span class='text-success'><i class='fa fa-check-square-o ' ng-if='dataset.dcat.dcatrightsholdername!=null'></i></span>
								<span translate>DATASET_FIELD_METADATA_DCAT_RIGHTHOLDERNAME</span>
							</li>
							<li ng-if='!dataset.unpublished'>
								<i class='fa fa-square-o' ng-if='dataset.dcat.dcatnomeorg==null'></i>
								<span class='text-success'><i class='fa fa-check-square-o ' ng-if='dataset.dcat.dcatnomeorg!=null'></i></span>
								<span translate>DATASET_FIELD_METADATA_DCAT_NOMEORG</span>
							</li>
							<li ng-if='!dataset.unpublished'>
								<i class='fa fa-square-o' ng-if='dataset.dcat.dcatemailorg==null'></i>
								<span class='text-success'><i class='fa fa-check-square-o ' ng-if='dataset.dcat.dcatemailorg!=null'></i></span>
								<span translate>DATASET_FIELD_METADATA_DCAT_EMAILORG</span>
							</li>
												
						</ul>
					</li>
				</ul>
			</div>
		</div>	
	</div>
</form>