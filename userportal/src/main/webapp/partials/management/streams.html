<div ng-controller="ManagementStreamListCtrl as streamsCtrl"  ng-cloak>
	<div class='container'>
		<h3><span translate-cloak translate>MANAGEMENT_STREAM_SUBTITLE</span></h3>
		<div class='row'>
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" >
				<!-- Main component for a primary marketing message or call to action -->
		
				<!-- Single button -->
				<div class='clearfix  content-toolbar'>
					<div class="pull-left">
			        	<a  href="#/management/newStream/{{tenantCode}}" class="btn  btn-new" ng-disabled="!isAuthorized('management/streams/update') || !isOwner()">
							<span class="glyphicon glyphicon-plus "></span>&nbsp;<span translate-cloak translate>MANAGEMENT_STREAM_LIST_NEW_STREAM</span>
						</a>
						<button  href="javascript:void(0)" ng-click='editStream()' class="btn  btn-edit" ng-disabled="!isAuthorized('management/streams/update') || !isOwner() || !canEdit()" title="{{'MANAGEMENT_STREAM_LIST_EDIT_STREAM_BUTTON_HINT'|translate}}">
							<span class="glyphicon glyphicon-pencil "></span>&nbsp;<span translate-cloak translate>MANAGEMENT_STREAM_LIST_EDIT_STREAM</span>
						</button>
						<button href="javascript:void(0)" ng-click='deleteStream()'class="btn  btn-delete" ng-disabled="true" title="{{'MANAGEMENT_STREAM_LIST_DELETE_STREAM_BUTTON_HINT'|translate}}">
							<span class="glyphicon glyphicon-trash "></span>&nbsp;<span translate-cloak translate>MANAGEMENT_STREAM_LIST_DELETE_STREAM</span>
						</button>
					</div>
					<div class="btn-group pull-right">
						<form class="form-inline" role="form">
							<div class="form-group">
								<label class="checkbox inline">
	   								<input type="checkbox" class="form-control col-xs-2" ng-model="viewUnistalledCheck">
									<span translate-cloak translate>MANAGEMENT_STREAM_LIST_SHOW_UNINSTALLED&nbsp;</span>
								</label>
							</div>
							<div class="form-group">
								<input type="text" class="form-control col-xs-2" ng-model="statusFilter" placeholder="{{'STREAM_LIST_STATUS_FILTER'|translate}}" />
							</div>
							<div class="form-group">
								<input type="text" class="form-control col-xs-2" ng-model="codeFilter" placeholder="{{'STREAM_LIST_CODE_FILTER'|translate}}" />
							</div>
						</form>
					</div>
				</div>
				<div class="table-responsive dashboard-streamList-table">
					<table class="table">
						<thead>
							<tr>
								<th>
								</th>
								<th>
									<a href="" ng-click="predicate = 'codiceStream'; reverse=!reverse"><span translate-cloak translate>STREAM_FIELD_CODE</span> 
									<span ng-show="predicate=='codiceStream' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='codiceStream' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								
								</th>
								<th>
									<a href="" ng-click="predicate = 'codiceVirtualEntity'; reverse=!reverse"><span translate-cloak translate>VIRTUALENTITY</span> 
									<span ng-show="predicate=='codiceVirtualEntity' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='codiceVirtualEntity' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								
								</th>
								<th>
									<a href="" ng-click="predicate = 'lastupdate'; reverse=!reverse"><span translate-cloak translate>STREAM_FIELD_LASTUPDATE</span> 
									<span ng-show="predicate=='lastupdate' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='lastupdate' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								
								</th>
								<th>
									<a href="" ng-click="predicate = 'deploymentStatusDesc'; reverse=!reverse"><span translate-cloak translate>STREAM_FIELD_STATUS</span> 
									<span ng-show="predicate=='deploymentStatusDesc' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='deploymentStatusDesc' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								</th>
								<th>
									<a href="" ng-click="predicate = 'installed_version'; reverse=!reverse"><span translate-cloak translate>STREAM_FIELD_VERSION</span> 
									<span ng-show="predicate=='installed_version' && !reverse" class="glyphicon glyphicon-chevron-up small"></span>
									<span ng-show="predicate=='installed_version' && reverse" class="glyphicon glyphicon-chevron-down small"></span></a>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-show="showLoading">
								<td colspan='6' >
									<div class='ajax-loading-container'>
										<span class='ajax-loading-big'></span>
										<h4>Loading...</h4>
									</div>
								</td>
							</tr>
							<tr ng-repeat="stream in filteredStreamsList = (streamsList | filter: searchCodeFilter | filter: searchStatusFilter| filter: viewUnistalledFilter| orderBy:predicate:reverse) |startFrom:(currentPage-1)*pageSize | limitTo:pageSize ">
								<td><input type="checkbox" name="selected" ng-checked="isSelected(stream)"  ng-click="updateSelection($event, stream)"/>
								<td class='text-left'>
									<a href="#/management/viewStream/{{tenant}}/{{stream.codiceVirtualEntity}}/{{stream.codiceStream}}">
										<img ng-src="{{stream.streamIcon}}" alt="logo stream" class='list-entity-icon-preview-img' >
										<strong>{{stream.codiceStream}}</strong> - {{stream.nomeStream}}
									</a>
								</td>
								
								<td>{{stream.codiceVirtualEntity}}</td>
								<td>{{stream.lastUpdate|date}}</td>
								<td class='text-left'><span ng-bind-html="stream.statusIcon"></span> {{stream.deploymentStatusCode|translate}}</td>
								<td>{{stream.installed_version}}</td>
							</tr>
						</tbody>
					</table>
					<pagination boundary-links="true" total-items="filteredStreamsList.length" ng-model="currentPage" ng-change="selectPage()" class="pagination-sm" previous-text="&lsaquo;"
						next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
					></pagination>
		
		
				</div>
			</div>
		</div>
	</div>
</div>