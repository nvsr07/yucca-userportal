<div class='table-header clearfix'>
	<div class="pull-left table-toolabr-actions">
		<a href ng-click="resultViewType = 'box'" ng-class="{'table-toolabr-actions-active':resultViewType=='box'}"><i class="fa fa-th"  title="{{'DATABROWSER_SHOW_GRID'|translate}}"></i></a>
		<a href ng-click="resultViewType = 'list'"  ng-class="{'table-toolabr-actions-active':resultViewType=='list'}"><i class="fa fa-table" title="{{'DATABROWSER_SHOW_LIST'|translate}}"></i></a>
		<span ng-show='totalFound!=null'><strong><span translate-cloak translate>DATA_EXPLORER_TOTAL_FOUND</span>:</strong> {{totalFound}}</span>
	</div>
	<div class='pull-right table-toolbar-info'>
		<span ng-show='currentStep!=domains'>
			<span class="query-label" ng-show='queryInput!=null && currentStep == "results"'> 
				<strong translate-cloak translate>DATA_EXPLORER_QUERY_INPUT</strong> <span>{{queryInput}}</span>
			</span>
			<span class="tag-label" ng-show='selectedTags!=null && selectedTags.length>0'> 
				<span class=' panel-dataexplorer-topbar-separator-big'>|</span>
				<strong translate-cloak translate>DATASET_FIELD_METADATA_TAGS</strong> <span ng-repeat="tag in selectedTags"><span ng-bind-html="tag|translate"></span> &nbsp;</span>
			</span>
			<!-- span class="domain-label" ng-show='selectedDomain!=null'>
				<span class=' panel-dataexplorer-topbar-separator-big'>|</span>
				<strong translate-cloak translate>DATASET_FIELD_METADATA_DATADOMAIN</strong> <span>{{selectedDomain|translate}}</span>
			</span -->
		</span>
		<a ng-click='goToChooseDomains()' class="btn btn-default btn-sm " translate-cloak translate>DATABROWSER_RESULTS_BACK_BTN</a>
	</div>
	
</div>

<div class=''>
	<div ng-show='isNavigation'>
		<div class='ajax-loading-container' ng-show="showNavigationLoading">
			<span class='ajax-loading-big'></span>
			<h4>Loading...</h4>
		</div>
		<div class='alert alert-info' ng-show="datasetList.length==0 && !showNavigationLoading && errors.length==0">
			<span translate-cloak translate>DATA_EXPLORER_DATA_RESULT_EMPTY</span>
		</div>
	</div>
	<div class="alert alert-danger" ng-show='errors.length!=0'>
		<div class='row  text-left' ng-repeat="error in errors">
			<div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">{{error.message|string_ellipse:50}}</div>
			<div class="col-lg-8 col-md-1 col-sm-12 col-xs-12">{{error.detail|string_ellipse:120}}</div>
		</div>		
	</div>
	<div ng-show="!showNavigationLoading && datasetList.length>0" class='dataexplorer-table-grid-container'>
		<table class='table dataexplorer-table-grid' ng-show="resultViewType == 'list'">
			<thead>
				<tr>
					<th>&nbsp;</th>
					<th ng-repeat='column in columns track by $index'>
						<div class=''>{{column["label"]|translate}}</div>
						<div class='order-icons' ng-show="column['showOrderButton']" style='display: none'>
							<a href ng-click='orderResult(column["label"],"desc")' ng-show='column["order"]=="none"'><i class='fa fa-sort'></i></a>
							<a href ng-show='column["order"]=="desc"' ><i class='fa fa-sort-desc'></i></a>
							<a href ng-show='column["order"]=="asc"' ng-click='orderResult(column["label"],"none")'><i class='fa fa-sort-asc'></i></a>
						</div>
					</th>
					<th>&nbsp;</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="data in datasetList" class='browsedata-metadata-row'>
					<td ng-click="openDetail(data)" title="{{'DATABROWSER_RESULTS_DETAIL_HINT'|translate}}" >
						<div class='type-column'>
							<img ng-src="/userportal/img/icons/{{data['type']}}_icon.png" alt="{{data['type']|translate}}">
						</div>
					</td>
					<td ng-click="openDetail(data)" title="{{'DATABROWSER_RESULTS_DETAIL_HINT'|translate}}" >
						<div class='dataexplorer-table-grid-first-column'>
							<img ng-src="{{datasetList[$index].datasetIcon}}" alt="logo dataset" class="img-responsive dataset-icon" >
							<strong>{{data["customDescription"]}}</strong><br><small><span class='muted' title="{{data['datasetName']}}">{{data["datasetName"]|string_ellipse:50}}</span></small>
						</div>
					</td>
					<td ng-click="openDetail(data)" title="{{'DATABROWSER_RESULTS_DETAIL_HINT'|translate}}" >
						<div class='domain-column'><i class="icon-{{data['dataDomain']}} domain-icon" title="{{data['dataDomain']|translate}}"></i></div>
					</td>
					<td ng-click="openDetail(data)" title="{{'DATABROWSER_RESULTS_DETAIL_HINT'|translate}}" >
						<ul class="list-inline">
							<li ng-repeat="tag in data['tags']"><span class=""><span ng-bind-html="tag|translate"></span></span></li>
						</ul>
					</td>
					<td ng-click="openDetail(data)" title="{{'DATABROWSER_RESULTS_DETAIL_HINT'|translate}}" >{{data["tenantCode"]}}</td>
					<td class='license-column' ng-click="openDetail(data)" title="{{'DATABROWSER_RESULTS_DETAIL_HINT'|translate}}" >
						{{data["license"]}} 
						<span class='license-column-icons'>
							<i ng-show="data['copyright']!=null && data['copyright']!=''"class="fa fa-copyright" title="{{data['copyright']}}"></i> 
							<i ng-show="data['disclaimer']!=null && data['disclaimer']!=''"class="fa fa-info-circle" title="{{data['disclaimer']}}"></i> 
						</span>
					</td>	
					<td>
						<a href ng-click='openStreamDashboard(data)'  class="btn btn-default btn-sm" ng-show='data["type"]=="stream"'>
							<i class="fa fa-line-chart" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;{{'MANAGEMENT_VIEW_STREAM_DASHBOARD_BUTTON'|translate}}
						</a>
						<a  href ng-click='exploreData(data)' class="btn btn-default btn-sm" ng-show='data["type"]=="dataset"'>
							<i class="fa fa-table" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp{{'MANAGEMENT_VIEW_DATASET_DATA_EXPLORER_BUTTON'|translate}}
						</a>
					</td>				
					
				</tr>
			</tbody>
		</table>
		<div class='dataexplorer-box-grid-container' ng-show="resultViewType == 'box'">
			<div deckgrid source="datasetList" cardTemplate="partials/dataexplorer/databrowser/card-template.html?{{BuildInfo.timestamp}}" class="deckgrid"></div>
		</div> 
	</div>
	<div ng-show='isNavigation && !showNavigationLoading' class='text-center'>
		<pagination boundary-links="true" total-items="totalFound" ng-model="currentPage" ng-change="selectPage(currentPage)" class="pagination-sm" previous-text="&lsaquo;" max-size='5'
					next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;">
		</pagination>
	</div>
	<div ng-show='!isNavigation'>
		<div class='ajax-loading-container ajax-loading-container-lightgray' ng-show="showSearchLoading">
			<span class='ajax-loading-big ajax-loading-big-lightgray'></span>
			<h4>Loading...</h4>
		</div>
		<div class='alert alert-info' ng-show="noMoreSearchData && !showSearchLoading && errors.length==0">
			<span translate ng-show="datasetList.length==0">DATA_EXPLORER_DATA_RESULT_EMPTY</span>
			<span translate ng-show="datasetList.length>0">DATA_EXPLORER_DATA_RESULT_NO_MORE_DATA</span>
		</div>
		
		<div class='browsedata-load-more-toolbar' ng-show="!showSearchLoading && !noMoreSearchData">
			<a href ng-click='search()' class='btn btn-default' translate-cloak translate>DATA_EXPLORER_MORE_DATA_BUTTON</a>
		</div>
		</div>
	
	
	
	<div class='browsedata-toolbar'>
		<a ng-click='goToChooseDomains(true)' class="btn btn-default " translate-cloak translate>DATABROWSER_RESULTS_BACK_BTN</a>
	</div>
</div>



