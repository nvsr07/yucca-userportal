<div ng-controller="DataSubscriptionsCtrl as subscriptionsCtrl" ng-cloak>
	<div class="container">
		<div class='title-container'>
			<div class="container">
				<h1>{{'SUBSCRIPTIONS_TITLE'|translate}}</h1>
			</div>
		</div>
	
	<div class="modal-body table-responsive" ng-show="subscriptionList">
		<div>
			<table class="table">
				<thead>
					<tr>
						<th><span translate>ACCESS_TOKEN</span></th>
						<th><span translate>TOKEN_VALIDITY</span></th>
						<th><span translate>CONSUMER_KEY</span></th>
						<th><span translate>CONSUMER_SECRET</span></th>
						<th><span translate>TOKEN_OPERATION</span></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="sub in subscriptionList">
						<td>{{sub.prodKey}}</td>
						<td><input class="input-sm form-control" type="text" name="validityTime" ng-model="validityTime" placeholder="{{'TOKEN_VALID_PLACEHOLDER'|translate}}" /></td>
						<td>{{sub.prodConsumerKey}}</td>
						<td>{{sub.prodConsumerSecret}}</td>
						<td>
							<button class="btn btn-primary" type="button" ng-click="generateToken(validityTime)" translate ng-show="sub.prodKey == null">GENERATE_TOKEN_BTN</button>
							<button class="btn btn-primary" type="button" ng-click="rigenerateToken(validityTime)" translate ng-show="sub.prodKey != null">RE_GENERATE_TOKEN_BTN</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<div class="modal-body table-responsive" ng-show="applicationList">
		<div class='loadingPanel' ng-show="updating">
			<div><span translate>WAIT</span></div>
			<div><span class='ajax-loading-big'></span></div>
		</div>
		<h4><span translate>DATA_EXPLORER_APPLICATIONS_LIST_TITLE</span></h4>
	
		<div class='subpanel'>
			<div class="alert alert-danger alert-dismissible" ng-show='errorMessage'>
				<button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="clearMessages()"><span aria-hidden="true">&times;</span></button>
				<strong translate>WARNING</strong> {{errorMessage|translate}}
			</div>
			<div class="alert alert-success alert-dismissible" ng-show='updateMessage'>
				<button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="clearMessages()"><span aria-hidden="true">&times;</span></button>
				{{updateMessage|translate}}
			</div>
			<table class="table table-application-api">
				<thead>
					<tr>
						<th><span translate>APPLICATIONS_NAME</span></th>
						<th><span translate>APPLICATIONS_DESCRIPTION</span></th>
						<th colspan='3'>&nbsp;</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="application in applicationList">
						<td class='slim-td'>{{application.name}}</td>
						<td>
							<span ng-show="!application.isEditing">{{application.description}}</span>
							<input ng-show="application.isEditing" class="input-sm form-control" type="text" name="editedDescriptions{{$index}}"  
										                		ng-model="editedDescriptions[$index]" placeholder="{{'APPLICATIONS_DESCRIPTION'|translate}}">
						</td>
						<td	class='icon-td'>
							<a ng-show="!application.isEditing" href ng-click='startEditApplication($index)' class="btn btn-icon-edit btn-sm" title="{{'EDIT'|translate}}" ng-disable="!application.isBusy">
								<i class='glyphicon glyphicon-pencil'></i>
							</a>
							<a ng-show="application.isEditing" href ng-click='saveEditApplication($index)' class="btn btn-icon-add btn-sm" title="{{'SAVE'|translate}}" ng-disable="!application.isBusy"><i class='glyphicon glyphicon-ok'></i></a>
						</td>
						<td class='icon-td'>
							
							<!-- <a  ng-show="!application.isEditing" href ng-click='removeApplication($index)' class="btn btn-icon-remove btn-sm" title="{{'DELETE'|translate}}" ng-disable="!application.isBusy">
								<i class='glyphicon glyphicon-trash'></i>
							</a>-->
							<a ng-show="application.isEditing" href ng-click='cancelEditApplication($index)' class="btn btn-icon-plus btn-sm" title="{{'UNDO'|translate}}" ng-disable="!application.isBusy"><i class='glyphicon glyphicon-repeat'></i></a>
						</td>
						<td class='slim-td'>
							<a ng-show="!application.isEditing" href ng-click='viewSubscription(application.id, application.name)' class="btn btn-icon-edit btn-sm" title="{{'EDIT'|translate}}" ng-disable="!application.isBusy">
								<i class='glyphicon glyphicon-transfer'></i>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		
		<h4 translate>DATA_EXPLORER_SUBSCRIBE_NEW_APPLICATION_TITLE</h4>
		<div class='subpanel'>
			<form class="form-inline">
				<div class="form-group">
   					<label for="newApplicationName" translate>APPLICATIONS_NAME</label>
    				<input class="input-sm form-control" type="text" name="newApplicationName" ng-model="newApplicationName" placeholder="{{'APPLICATIONS_NAME'|translate}}" required="required">
  				</div>
  				<div class="form-group">
	    			<label for="newApplicationDescription" translate>APPLICATIONS_DESCRIPTION</label>
	    			<input class="input-sm form-control" type="text" name="newApplicationDescription" ng-model="newApplicationDescription" placeholder="{{'APPLICATIONS_DESCRIPTION'|translate}}">
  				</div>
  				<a href ng-click='createApplication()' class="btn btn-icon-plus " title="{{'SAVE'|translate}}" ><i class='glyphicon glyphicon-plus'></i> <span translate>DATA_EXPLORER_SUBSCRIBE_CREATE_APP_BTN</span></a>
			</form>
		</div>
	</div>
</div>
	</div>